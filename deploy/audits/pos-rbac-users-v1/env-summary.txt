# Environment Summary
Timestamp: 2026-02-19T23:45:15Z
Repo: /Users/enriquemoya/Documents/GitHub/Electron-Pos
Node: v20.18.0
npm: 10.8.2

## git status --short
 M apps/cloud-api/prisma/schema.prisma
 M apps/cloud-api/src/app.ts
 M apps/cloud-api/src/application/ports/index.ts
 M apps/cloud-api/src/application/use-cases/order-fulfillment.ts
 M apps/cloud-api/src/application/use-cases/users.ts
 M apps/cloud-api/src/errors/api-error.ts
 M apps/cloud-api/src/infrastructure/repositories/auth-service.ts
 M apps/cloud-api/src/infrastructure/repositories/checkout-service.ts
 M apps/cloud-api/src/infrastructure/repositories/profile-service.ts
 M apps/cloud-api/src/infrastructure/repositories/user-service.ts
 M apps/cloud-api/src/presentation/controllers/auth-controller.ts
 M apps/cloud-api/src/presentation/controllers/order-fulfillment-controller.ts
 M apps/cloud-api/src/presentation/middleware/require-admin.ts
 M apps/cloud-api/src/presentation/middleware/require-auth.ts
 M apps/cloud-api/src/presentation/routes/protected.ts
 M apps/cloud-api/src/validation/users.ts
 M apps/desktop/integrations/terminal-auth/terminal-auth.ts
 M apps/desktop/ipc/daily-reports-ipc.js
 M apps/desktop/ipc/expansion-ipc.js
 M apps/desktop/ipc/game-type-ipc.js
 M apps/desktop/ipc/inventory-ipc.js
 M apps/desktop/ipc/product-ipc.js
 M apps/desktop/main.js
 M apps/desktop/preload.js
 M apps/online-store/messages/en-US.json
 M apps/online-store/messages/es-MX.json
 M apps/online-store/src/app/[locale]/admin/home/page.tsx
 M apps/online-store/src/app/[locale]/admin/orders/[orderId]/page.tsx
 M apps/online-store/src/app/[locale]/admin/orders/page.tsx
 M apps/online-store/src/app/[locale]/admin/users/[id]/actions.ts
 M apps/online-store/src/app/[locale]/admin/users/[id]/page.tsx
 M apps/online-store/src/app/[locale]/auth/login/page.tsx
 M apps/online-store/src/app/[locale]/auth/verify/route.ts
 M apps/online-store/src/components/admin/users/user-role-status-form.tsx
 M apps/online-store/src/components/header.tsx
 M apps/online-store/src/lib/admin-api.ts
 M apps/online-store/src/lib/admin-guard.ts
 M apps/online-store/src/lib/profile-api.ts
 M apps/web/src/app/i18n.ts
 M apps/web/src/app/layout.tsx
 M apps/web/src/components/terminal/activation-gate.tsx
 M apps/web/src/types/electron-api.d.ts
?? .specs/pos-rbac-users-v1/
?? apps/cloud-api/prisma/migrations/20260219190000_pos_rbac_users_v1/
?? apps/cloud-api/src/application/use-cases/pos-auth.ts
?? apps/cloud-api/src/presentation/controllers/pos-auth-controller.ts
?? apps/cloud-api/src/presentation/middleware/require-rbac.ts
?? apps/web/src/components/terminal/pin-display.tsx
?? apps/web/src/components/terminal/pin-keypad.tsx
?? deploy/audits/

## Build Gates

$ npm run build -w apps/cloud-api

> @pos/cloud-api@0.0.0 build
> tsc -p tsconfig.json

RESULT: PASS

$ npm run build -w apps/online-store

> @pos/online-store@0.0.0 build
> next build

  ▲ Next.js 14.2.35

   Creating an optimized production build ...
 ✓ Compiled successfully
   Linting and checking validity of types ...
   Collecting page data ...
   Generating static pages (0/60) ...
   Generating static pages (15/60) 
   Generating static pages (30/60) 
   Generating static pages (45/60) 
 ✓ Generating static pages (60/60)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                                   Size     First Load JS
┌ ○ /_not-found                               877 B          88.2 kB
├ ● /[locale]                                 1.41 kB         161 kB
├   ├ /es
├   └ /en
├ ● /[locale]/account/orders                  5.33 kB         129 kB
├   ├ /es/account/orders
├   └ /en/account/orders
├ ƒ /[locale]/account/orders/[orderId]        1.67 kB        98.7 kB
├ ● /[locale]/account/profile                 2.88 kB         135 kB
├   ├ /es/account/profile
├   └ /en/account/profile
├ ● /[locale]/admin/blog                      126 kB          276 kB
├   ├ /es/admin/blog
├   └ /en/admin/blog
├ ● /[locale]/admin/branches                  1.21 kB         133 kB
├   ├ /es/admin/branches
├   └ /en/admin/branches
├ ● /[locale]/admin/home                      1.66 kB        98.7 kB
├   ├ /es/admin/home
├   └ /en/admin/home
├ ● /[locale]/admin/inventory                 3.85 kB         108 kB
├   ├ /es/admin/inventory
├   └ /en/admin/inventory
├ ● /[locale]/admin/orders                    5.28 kB         129 kB
├   ├ /es/admin/orders
├   └ /en/admin/orders
├ ƒ /[locale]/admin/orders/[orderId]          3.2 kB          151 kB
├ ● /[locale]/admin/products                  3.07 kB         117 kB
├   ├ /es/admin/products
├   └ /en/admin/products
├ ƒ /[locale]/admin/products/[id]             2.28 kB         134 kB
├ ● /[locale]/admin/products/new              2 kB            134 kB
├   ├ /es/admin/products/new
├   └ /en/admin/products/new
├ ● /[locale]/admin/proofs                    1.67 kB        98.7 kB
├   ├ /es/admin/proofs
├   └ /en/admin/proofs
├ ● /[locale]/admin/taxonomies                5.47 kB         141 kB
├   ├ /es/admin/taxonomies
├   └ /en/admin/taxonomies
├ ● /[locale]/admin/terminals                 12.1 kB         166 kB
├   ├ /es/admin/terminals
├   └ /en/admin/terminals
├ ƒ /[locale]/admin/terminals/[id]            4.13 kB         133 kB
├ ● /[locale]/admin/users                     1.67 kB        98.7 kB
├   ├ /es/admin/users
├   └ /en/admin/users
├ ƒ /[locale]/admin/users/[id]                2.85 kB         117 kB
├ ● /[locale]/auth/login                      2.45 kB        96.7 kB
├   ├ /es/auth/login
├   └ /en/auth/login
├ ƒ /[locale]/auth/logout                     0 B                0 B
├ ƒ /[locale]/auth/verify                     0 B                0 B
├ ● /[locale]/blog                            1.67 kB        98.7 kB
├   ├ /es/blog
├   └ /en/blog
├ ƒ /[locale]/blog/[slug]                     1.66 kB         101 kB
├ ƒ /[locale]/blog/rss.xml                    0 B                0 B
├ ● /[locale]/cart                            5.22 kB         144 kB
├   ├ /es/cart
├   └ /en/cart
├ ƒ /[locale]/catalog/[[...segments]]         6.84 kB         184 kB
├ ● /[locale]/checkout                        5.95 kB         173 kB
├   ├ /es/checkout
├   └ /en/checkout
├ ● /[locale]/faq                             1.66 kB         101 kB
├   ├ /es/faq
├   └ /en/faq
├ ● /[locale]/privacy                         1.67 kB        98.7 kB
├   ├ /es/privacy
├   └ /en/privacy
├ ƒ /[locale]/product/[slug]                  3.66 kB         146 kB
├ ● /[locale]/returns                         1.67 kB        98.7 kB
├   ├ /es/returns
├   └ /en/returns
├ ● /[locale]/terms                           1.67 kB        98.7 kB
├   ├ /es/terms
├   └ /en/terms
├ ƒ /api/admin/blog/posts                     0 B                0 B
├ ƒ /api/admin/blog/posts/[id]                0 B                0 B
├ ƒ /api/admin/blog/posts/[id]/publish        0 B                0 B
├ ƒ /api/admin/blog/posts/[id]/unpublish      0 B                0 B
├ ƒ /api/admin/media                          0 B                0 B
├ ƒ /api/admin/media/[...key]                 0 B                0 B
├ ƒ /api/admin/media/proofs                   0 B                0 B
├ ƒ /api/admin/media/proofs/[id]              0 B                0 B
├ ƒ /api/admin/media/upload                   0 B                0 B
├ ƒ /api/admin/terminals                      0 B                0 B
├ ƒ /api/admin/terminals/[id]/regenerate-key  0 B                0 B
├ ƒ /api/admin/terminals/[id]/revoke          0 B                0 B
├ ƒ /api/checkout/drafts                      0 B                0 B
├ ƒ /api/checkout/drafts/active               0 B                0 B
├ ƒ /api/checkout/orders                      0 B                0 B
├ ƒ /api/checkout/revalidate                  0 B                0 B
├ ƒ /api/cloud/catalog/featured               0 B                0 B
├ ○ /api/env-check                            0 B                0 B
├ ƒ /api/image-proxy                          0 B                0 B
├ ƒ /api/taxonomies/[type]                    0 B                0 B
└ ƒ /sitemap.xml                              0 B                0 B
+ First Load JS shared by all                 87.3 kB
  ├ chunks/2117-a04089a50da6b0fd.js           31.7 kB
  ├ chunks/fd9d1056-b2fbeae2bbf6ca90.js       53.6 kB
  └ other shared chunks (total)               1.96 kB


ƒ Middleware                                  39.3 kB

○  (Static)   prerendered as static content
●  (SSG)      prerendered as static HTML (uses getStaticProps)
ƒ  (Dynamic)  server-rendered on demand

RESULT: PASS

$ npm run build -w apps/desktop

> @pos/desktop@0.0.0 build
> echo "Electron packaging not configured yet."

Electron packaging not configured yet.
RESULT: PASS

$ npm run build -w apps/web

> @pos/web@0.0.0 build
> next build

  ▲ Next.js 14.2.5

   Creating an optimized production build ...
 ✓ Compiled successfully
   Linting and checking validity of types ...
   Collecting page data ...
   Generating static pages (0/25) ...
   Generating static pages (6/25) 
   Generating static pages (12/25) 
   Generating static pages (18/25) 
 ✓ Generating static pages (25/25)
   Finalizing page optimization ...
   Collecting build traces ...

Route (app)                              Size     First Load JS
┌ ○ /                                    138 B          87.3 kB
├ ○ /_not-found                          873 B            88 kB
├ ○ /customers                           5.21 kB         138 kB
├ ● /customers/[id]/credit               3.37 kB         126 kB
├   └ /customers/detail/credit
├ ○ /customers/credit                    3.39 kB         126 kB
├ ○ /dashboard                           2.85 kB         105 kB
├ ○ /error/data                          3.15 kB        98.4 kB
├ ○ /error/db                            3.81 kB        99.1 kB
├ ○ /error/generic                       3.15 kB        98.4 kB
├ ○ /error/render                        3.15 kB        98.4 kB
├ ○ /inventory                           4.12 kB         126 kB
├ ○ /new-sale                            5.91 kB        93.1 kB
├ ○ /products                            149 kB          275 kB
├ ○ /reports/daily                       2.37 kB        89.5 kB
├ ○ /sales                               5.32 kB         127 kB
├ ○ /sales/detail                        4.84 kB         100 kB
├ ○ /settings                            756 B          94.7 kB
├ ○ /settings/cash-register              2.31 kB        89.5 kB
├ ○ /settings/expansions                 4.68 kB         130 kB
├ ○ /settings/game-types                 4.01 kB         130 kB
├ ○ /settings/integrations               2.17 kB        96.2 kB
├ ○ /tournaments                         5.9 kB          128 kB
└ ● /tournaments/[id]                    11.9 kB         137 kB
    └ /tournaments/detail
+ First Load JS shared by all            87.2 kB
  ├ chunks/1dd3208c-90f506bcbc815e19.js  53.6 kB
  ├ chunks/842-cf99cc78d595c8cd.js       31.6 kB
  └ other shared chunks (total)          1.9 kB


○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses getStaticProps)

RESULT: PASS

$ npm run gov:impl:audit -- "pos-rbac-users-v1"

> gov:impl:audit
> node ./scripts/governance/impl-audit.js pos-rbac-users-v1

Implementation audit workflow
- Follow .agent/workflows/impl-audit.md
- Target spec: pos-rbac-users-v1
- Output: audit report and verdict
RESULT: PASS

## Forbidden console scan
$ rg -n "console\.(log|warn|error)" apps/cloud-api/src apps/desktop -S
RESULT: PASS (0 matches)

## Env probes
DATABASE_URL host: ep-aged-frog-afnguqc6-pooler.c-2.us-west-2.aws.neon.tech
JWT_SECRET set: yes
CLOUD_SHARED_SECRET set: yes
